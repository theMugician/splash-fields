/*! For license information please see plugin-sidebar.js.LICENSE.txt */
!function(){var e={694:function(e,t,a){"use strict";var r=a(925);function i(){}function l(){}l.resetWarningCache=i,e.exports=function(){function e(e,t,a,i,l,n){if(n!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:i};return a.PropTypes=a,a}},556:function(e,t,a){e.exports=a(694)()},925:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},20:function(e,t,a){"use strict";var r=a(594),i=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,a){var r,s={},c=null,d=null;for(r in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!o.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:s,_owner:n.current}}t.jsx=s,t.jsxs=s},848:function(e,t,a){"use strict";e.exports=a(20)},594:function(e){"use strict";e.exports=React}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,a),l.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=wp.plugins,t=wp.editPost,r=wp.components,i=wp.data,l=wp.compose,n=a(848),o=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]||!1}))))((e=>(0,n.jsx)(r.CheckboxControl,{label:e.label,checked:void 0!==e.value?e.value:e.metaValue,onChange:t=>{e.onChange?e.onChange(t):e.setMetaValue(t)}}))),s=a(556),c=a.n(s);const d=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:JSON.stringify(a)}})}}))),(0,i.withSelect)(((e,t)=>{const a=e("core/editor").getEditedPostAttribute("meta")[t.metaKey];return{metaValue:a?JSON.parse(a):[]}})))((e=>{const t=Object.entries(e.options).map((e=>{let[t,a]=e;return{value:t,label:a}}));return(0,n.jsxs)("div",{children:[e.label&&(0,n.jsx)("label",{children:e.label}),t.map((t=>(0,n.jsx)(r.CheckboxControl,{label:t.label,checked:e.metaValue.includes(t.value),onChange:()=>(t=>{const a=e.metaValue.includes(t)?e.metaValue.filter((e=>e!==t)):[...e.metaValue,t];e.setMetaValue(a)})(t.value)},t.value)))]})}));d.propTypes={label:c().string,options:c().objectOf(c().string).isRequired,metaKey:c().string.isRequired,metaValue:c().array.isRequired,setMetaValue:c().func.isRequired},d.defaultProps={options:{}};var u=d,m=wp.element;const p=e=>{let{value:t,onChange:a}=e;const i=(0,m.useRef)();return(0,m.useEffect)((()=>{if(window.tinymce)return tinymce.init({target:i.current,setup:e=>{e.on("init",(()=>{e.setContent(t||"")})),e.on("change keyup setcontent",(()=>{a(e.getContent())}))},menubar:!1,toolbar:"formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent | link",plugins:"link",block_formats:"Paragraph=p; Heading 1=h1; Heading 2=h2; Heading 3=h3; Heading 4=h4; Heading 5=h5; Heading 6=h6"}),()=>{window.tinymce&&tinymce.remove(i.current)}}),[t]),(0,n.jsxs)("div",{children:[!window.tinymce&&(0,n.jsx)(r.Spinner,{}),(0,n.jsx)("textarea",{ref:i})]})};var h=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>{const a=e("core/editor").getEditedPostAttribute("meta");return{metaValue:(a?a[t.metaKey]:"")||""}})))((e=>(0,n.jsxs)("div",{children:[e.label&&(0,n.jsx)("label",{children:e.label}),(0,n.jsx)(p,{value:e.metaValue,onChange:t=>e.setMetaValue(t)})]}))),y=wp.blockEditor,x=wp.i18n,b=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]}))))((e=>{const t=e.metaValue?JSON.parse(e.metaValue):null;return(0,n.jsxs)("div",{children:[e.label&&(0,n.jsx)("label",{children:e.label}),(0,n.jsx)(y.MediaUploadCheck,{children:(0,n.jsx)(y.MediaUpload,{onSelect:t=>{const a={id:t.id,url:t.url,name:t.title,type:t.mime};e.setMetaValue(JSON.stringify(a))},allowedTypes:e.allowedTypes,value:t?t.id:"",render:e=>{let{open:a}=e;return(0,n.jsx)(r.Button,{variant:"primary",onClick:a,children:t?(0,x.__)("Change File"):(0,x.__)("Upload File")})}})}),t&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,x.__)("File:","text-domain")}),(0,n.jsxs)("p",{children:[(0,x.__)("ID:","text-domain")," ",t.id]}),(0,n.jsxs)("p",{children:[(0,x.__)("URL:","text-domain")," ",(0,n.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url})]}),(0,n.jsxs)("p",{children:[(0,x.__)("Name:","text-domain")," ",t.name]}),(0,n.jsxs)("p",{children:[(0,x.__)("Type:","text-domain")," ",t.type]})]})]})})),f=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{const r=JSON.stringify(a);e("core/editor").editPost({meta:{[t.metaKey]:r}})}}))),(0,i.withSelect)(((e,t)=>{let a=e("core/editor").getEditedPostAttribute("meta")[t.metaKey],r=[];try{r=a?JSON.parse(a):[],Array.isArray(r)||(r=[])}catch(e){console.error("Failed to parse metaValue",e),r=[]}return{metaValue:r}})))((e=>(0,n.jsxs)("div",{children:[e.label&&(0,n.jsx)("label",{children:e.label}),(0,n.jsx)(y.MediaUploadCheck,{children:(0,n.jsx)(y.MediaUpload,{onSelect:t=>{const a={id:t.id,url:t.url,name:t.title,alt:t.alt},r=[...e.metaValue,a];e.setMetaValue(r)},allowedTypes:["image"],value:e.metaValue.map((e=>e.id)),render:e=>{let{open:t}=e;return(0,n.jsx)(r.Button,{onClick:t,children:(0,x.__)("Upload Image")})}})}),e.metaValue.length>0&&(0,n.jsx)("div",{children:e.metaValue.map((t=>(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:t.url,alt:t.alt||(0,x.__)("Selected Image"),style:{maxWidth:"100%"}}),(0,n.jsxs)("p",{children:[(0,x.__)("Image ID:","text-domain")," ",t.id]}),(0,n.jsxs)("p",{children:[(0,x.__)("Image Name:","text-domain")," ",t.name]}),(0,n.jsxs)("p",{children:[(0,x.__)("Image Alt:","text-domain")," ",t.alt]}),(0,n.jsx)(r.Button,{onClick:()=>(t=>{const a=e.metaValue.filter((e=>e.id!==t));e.setMetaValue(a)})(t.id),children:(0,x.__)("Remove Image")})]},t.id)))})]}))),j=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]}))))((e=>{const t=Object.keys(e.options).map((t=>({label:e.options[t],value:t})));return(0,n.jsx)(r.RadioControl,{label:e.label,selected:e.metaValue,options:t,onChange:t=>{e.setMetaValue(t)}})})),g=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]}))))((e=>{const t=Object.keys(e.options).map((t=>({label:e.options[t],value:t})));return(0,n.jsx)(r.SelectControl,{label:e.label,value:e.metaValue,options:t,onChange:t=>{e.setMetaValue(t)}})})),V=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]||""}))))((e=>(0,n.jsx)(r.TextControl,{type:"text",label:e.label,value:e.value||e.metaValue,onChange:t=>{e.onChange?e.onChange(t):e.setMetaValue(t)}}))),_=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]}))))((e=>(0,n.jsx)(r.TextareaControl,{label:e.label,value:e.metaValue,onChange:t=>{e.setMetaValue(t)}}))),v=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:a}})}}))),(0,i.withSelect)(((e,t)=>({metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]}))))((e=>(0,n.jsx)(r.TextControl,{type:"number",label:e.label,value:e.metaValue,onChange:t=>{e.setMetaValue(t)}}))),w=(0,l.compose)((0,i.withDispatch)(((e,t)=>({setMetaValue:a=>{e("core/editor").editPost({meta:{[t.metaKey]:JSON.stringify(a)}})}}))),(0,i.withSelect)(((e,t)=>{const a=e("core/editor").getEditedPostAttribute("meta")[t.metaKey]||"[]";return{metaValue:JSON.parse(a)}})))((e=>{const[t,a]=(0,m.useState)(e.metaValue);(0,m.useEffect)((()=>{a(e.metaValue)}),[e.metaValue]);return(0,n.jsxs)("div",{children:[e.label&&(0,n.jsx)("label",{children:e.label}),t.map(((i,l)=>((i,l)=>(0,n.jsxs)("div",{style:{marginBottom:"10px"},children:[e.fields.map((s=>{const c={key:`${e.metaKey}-${l}-${s.id}`,label:s.label,metaKey:`${e.metaKey}[${l}][${s.id}]`,value:i[s.id]?i[s.id].value:"",onChange:r=>((r,i)=>{const l=[...t];l[r]=i,a(l),e.setMetaValue(l)})(l,{...i,[s.id]:{...i[s.id],value:r}})};switch(s.type){case"checkbox":return(0,n.jsx)(o,{...c});case"checkbox-list":return(0,n.jsx)(u,{...c,options:s.options});case"editor":return(0,n.jsx)(h,{...c});case"file":return(0,n.jsx)(b,{...c,allowedTypes:s.allowedTypes});case"image":return(0,n.jsx)(f,{...c,allowedTypes:s.allowedTypes});case"radio":return(0,n.jsx)(j,{...c,options:s.options});case"select":return(0,n.jsx)(g,{...c,options:s.options});case"text":return(0,n.jsx)(V,{...c});case"textarea":return(0,n.jsx)(_,{...c});case"number":return(0,n.jsx)(v,{...c});default:return(0,n.jsx)(r.TextControl,{...c})}})),(0,n.jsx)(r.Button,{isDestructive:!0,onClick:()=>(r=>{const i=t.filter(((e,t)=>t!==r));a(i),e.setMetaValue(i)})(l),children:(0,x.__)("Remove","text-domain")})]},l))(i,l))),(0,n.jsx)(r.Button,{variant:"isPrimary",onClick:()=>{const r=e.fields.reduce(((e,t)=>(e[t.id]={type:t.type,value:t.default||""},e)),{}),i=[...t,r];a(i),e.setMetaValue(i)},children:(0,x.__)("Add Item","text-domain")})]})}));const P=window.fields||[];console.log(P),(0,e.registerPlugin)("spf-sidebar",{render:()=>(0,n.jsx)(t.PluginSidebar,{name:"spf-sidebar",title:"SPF Sidebar",children:(0,n.jsx)(r.PanelBody,{children:P.map((e=>{switch(e.type){case"checkbox":return(0,n.jsx)(o,{label:e.name,metaKey:e.id},e.id);case"checkbox-list":return(0,n.jsx)(u,{label:e.name,metaKey:e.id,options:e.options},e.id);case"editor":return(0,n.jsx)(h,{label:e.name,metaKey:e.id},e.id);case"file":return(0,n.jsx)(b,{label:e.name,metaKey:e.id,allowedTypes:e.allowedTypes},e.id);case"image":return(0,n.jsx)(f,{label:e.name,metaKey:e.id,allowedTypes:e.allowedTypes},e.id);case"radio":return(0,n.jsx)(j,{label:e.name,metaKey:e.id,options:e.options},e.id);case"repeater":return(0,n.jsx)(w,{label:e.name,metaKey:e.id,fields:e.fields},e.id);case"select":return(0,n.jsx)(g,{label:e.name,metaKey:e.id,options:e.options},e.id);case"text":return(0,n.jsx)(V,{label:e.name,metaKey:e.id},e.id);case"textarea":return(0,n.jsx)(_,{label:e.name,metaKey:e.id},e.id);case"number":return(0,n.jsx)(v,{label:e.name,metaKey:e.id},e.id);default:return null}}))})})})}()}();